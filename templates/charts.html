{% extends "base.html" %} {% block title %}Charts - Kotak Neo Trading{% endblock
%} {% block head %}
<link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/charts.css') }}"
/>
<link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/skeleton_animation.css') }}"
/>
<link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/candlestick_charts.css') }}"
/>
<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
<script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
{% endblock %} {% block content %}

<!-- Actual Charts Content -->
<div class="charts-content" id="chartsContent">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 mb-1">Trading Charts</h1>
            <p class="text-muted mb-0">
                Interactive price charts and technical analysis
            </p>
        </div>
    </div>

    <!-- Content Container with relative positioning -->
    <div style="position: relative; min-height: 600px">
        <div class="row g-3 content-loading" id="chartsMainContent">
            <!-- Left Panel for Symbol Search -->
            <div class="col-lg-3 col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">Symbol Search</h6>
                    </div>
                    <div class="card-body p-3">
                        <!-- Search Input -->
                        <div class="mb-3 search-container">
                            <input
                                type="text"
                                class="form-control symbol-search"
                                id="symbolSearch"
                                placeholder="Search stocks, ETFs..."
                                autocomplete="off"
                            />
                            <div class="search-results" id="searchResults">
                                <!-- Search results will be populated here -->
                            </div>
                        </div>

                        <!-- Category Filter -->
                        <div class="mb-3">
                            <h6
                                class="text-uppercase text-secondary mb-2"
                                style="font-size: 0.75rem"
                            >
                                Categories
                            </h6>
                            <div class="category-checkboxes">
                                <div class="form-check">
                                    <input
                                        class="form-check-input"
                                        type="checkbox"
                                        value="NIFTY"
                                        id="categoryNifty"
                                        checked
                                    />
                                    <label
                                        class="form-check-label"
                                        for="categoryNifty"
                                    >
                                        Nifty
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input
                                        class="form-check-input"
                                        type="checkbox"
                                        value="NIFTY500"
                                        id="categoryNifty500"
                                    />
                                    <label
                                        class="form-check-label"
                                        for="categoryNifty500"
                                    >
                                        Nifty 500
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input
                                        class="form-check-input"
                                        type="checkbox"
                                        value="ETF"
                                        id="categoryEtf"
                                    />
                                    <label
                                        class="form-check-label"
                                        for="categoryEtf"
                                    >
                                        ETF
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Selected Symbols -->
                        <div class="mb-3">
                            <h6
                                class="text-uppercase text-secondary mb-2"
                                style="font-size: 0.75rem"
                            >
                                Selected Symbols
                            </h6>
                            <div class="selected-symbols" id="selectedSymbols">
                                <!-- Selected symbols will appear here -->
                            </div>
                            <button type="button" class="btn btn-outline-secondary btn-sm w-100 mt-2" onclick="clearSymbolSearchAndChart()">
                                <i class="fas fa-times me-1"></i>Clear Selection
                            </button>
                        </div>

                        <!-- Timeframe Controls -->
                        <div class="mb-3">
                            <h6
                                class="text-uppercase text-secondary mb-2"
                                style="font-size: 0.75rem"
                            >
                                Timeframe
                            </h6>
                            <div class="timeframe-controls">
                                <button class="timeframe-btn" data-period="1D">
                                    1D
                                </button>
                                <button class="timeframe-btn" data-period="1W">
                                    1W
                                </button>
                                <button class="timeframe-btn" data-period="1M">
                                    1M
                                </button>
                                <button class="timeframe-btn" data-period="3M">
                                    3M
                                </button>
                                <button class="timeframe-btn" data-period="1Y">
                                    1Y
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Chart Area -->
            <div class="col-lg-9 col-md-8">
                <div id="chartsContainer">
                    <div class="no-charts-message" id="noChartsMessage">
                        <i class="fas fa-chart-line fa-3x mb-3"></i>
                        <h4>No Charts Selected</h4>
                        <p>
                            Search and select symbols from the left panel to
                            display charts
                        </p>
                    </div>
                    <div
                        class="chart-grid single"
                        id="chartGrid"
                        style="display: none"
                    >
                        <!-- Charts will be dynamically added here -->
                    </div>
                    <!-- Candlestick Chart Container -->
                    <div
                        id="candlestickChartContainer"
                        class="chart-container"
                        style="display: none"
                    >
                        <div class="chart-header">
                            <h5 class="chart-title" id="chartTitle">Chart</h5>
                            <div
                                class="price-info"
                                id="priceInfo"
                                style="display: none"
                            >
                                <span class="price-value" id="currentPrice"
                                    >--</span
                                >
                                <span class="price-change" id="priceChange"
                                    >--</span
                                >
                            </div>
                        </div>
                        <div id="candlestickChart" class="chart-content">
                            <!-- Chart will be rendered here -->
                        </div>
                        <!-- No Charts Selected Message inside container -->
                        <div class="no-charts-message text-center py-5" id="noChartsInContainer" style="display: block;">
                            <i class="fas fa-chart-line fa-3x mb-3"></i>
                            <h4>No Charts Selected</h4>
                            <p>
                                Search and select symbols from the left panel to display charts
                            </p>
                        </div>
                        <div
                            id="chartLoading"
                            class="loading"
                            style="display: none"
                        >
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} {% block scripts %}
<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
<script src="{{ url_for('static', filename='js/candlestick_charts.js') }}"></script>
{% endblock %}
